(this["webpackJsonpshare-blog-react"]=this["webpackJsonpshare-blog-react"]||[]).push([[5],{143:function(e,t,a){e.exports=a(209)},188:function(e,t,a){},190:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),c=a.n(l),o=a(27),u=a(7),i=a(79),s=a(40);var m=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(2),a.e(4),a.e(12)]).then(a.bind(null,427))})),d=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(3),a.e(13)]).then(a.bind(null,441))})),f=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(3),a.e(16)]).then(a.bind(null,428))})),E=Object(n.lazy)((function(){return Promise.all([a.e(2),a.e(17),a.e(11)]).then(a.bind(null,429))})),g=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(10)]).then(a.bind(null,430))})),h=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(9)]).then(a.bind(null,431))})),b=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(2),a.e(4),a.e(8),a.e(14)]).then(a.bind(null,432))})),p=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(15)]).then(a.bind(null,433))}));function v(){var e=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){s.a.isLogined().then((function(e){r(e.isLogin)}))})),a}();return r.a.createElement(u.d,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading")},r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(m,null)),r.a.createElement(u.b,{path:"/register"},r.a.createElement(f,null)),r.a.createElement(u.b,{path:"/login"},r.a.createElement(d,null)),r.a.createElement(u.b,{path:"/detail/:blogId"},r.a.createElement(E,null)),r.a.createElement(u.b,{path:"/create"},e?r.a.createElement(h,null):r.a.createElement(u.a,{to:"/login"})),r.a.createElement(u.b,{path:"/edit/:blogId"},e?r.a.createElement(g,null):r.a.createElement(u.a,{to:"/login"})),r.a.createElement(u.b,{path:"/user/:userId"},e?r.a.createElement(p,null):r.a.createElement(u.a,{to:"/login"})),r.a.createElement(u.b,{path:"/my"},r.a.createElement(b,null))))}a(188);var y=function(){return n.createElement(n.Fragment,null,n.createElement("footer",{className:"footer"},n.createElement("span",null,"Copyright \xa9 2020 Tommy Shen.")))},O=a(71),L=a(38),j=a(55),N=(a(190),a(213)),k=a(215),w=a(214),S=a(212),P=a(217),I=a(216),z=Object(n.memo)((function(e){var t=e.isLogin,a=e.user,l=e.fetchCheckIsLogined,c=e.fetchLogout,i=Object(u.g)();Object(n.useEffect)((function(){l()}),[l]);var s=r.a.createElement("div",{className:"blog-header-nologin"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"logo"},r.a.createElement(o.b,{to:"/"},"BlogTalk")),r.a.createElement("div",{className:"slogan-wrapper"},r.a.createElement("h1",null,"We think through blogs."),r.a.createElement("div",{className:"line"}),r.a.createElement("div",{className:"title"},"\u535a\u5ba2\u4ea4\u6d41\u601d\u60f3 LET'S SHARE"),r.a.createElement("div",null,r.a.createElement(o.b,{to:"/login"},r.a.createElement("button",{className:"header-button"},"\u7acb\u5373\u767b\u5f55")),r.a.createElement(o.b,{to:"/register"},r.a.createElement("button",{className:"header-button"},"\u6ce8\u518c\u8d26\u53f7")))))),m=r.a.createElement("div",null,"\u6dfb\u52a0\u65b0\u6587\u7ae0"),d=r.a.createElement(N.a,null,r.a.createElement(N.a.Item,{key:"0"},r.a.createElement("span",null,r.a.createElement(o.b,{to:"/my",style:{color:"rgba(0, 0, 0, 0.65)"}},"\u6211\u7684\u6587\u7ae0"))),r.a.createElement(N.a.Item,{key:"1"},r.a.createElement("span",{onClick:function(){c(),i.push("/")}},"\u6ce8\u9500"))),f=r.a.createElement("div",{className:"header-after-login"},r.a.createElement("h1",null,r.a.createElement(o.b,{to:"/"},"BlOGTALK")),r.a.createElement("div",{className:"add-article"},r.a.createElement(k.a,{content:m},r.a.createElement(o.b,{to:"/create"},r.a.createElement(P.a,{style:{color:"#52c41a",fontSize:"32px"}})))),r.a.createElement("div",{className:"user"},r.a.createElement(w.a,{overlay:d,trigger:["click"],placement:"bottomCenter",arrow:!0},r.a.createElement(S.a,{icon:r.a.createElement(I.a,null),src:a.avatar,alt:a.usernaem}))));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"blog-header"},t?f:s))})),T=Object(j.b)((function(e){return{isLogin:e.isLogin,user:e.user}}),(function(e){return Object(L.b)({fetchCheckIsLogined:O.a,fetchLogout:O.c},e)}))(z);a(208);var C=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement("div",{className:"header"},r.a.createElement(T,null)),r.a.createElement("main",{className:"main"},r.a.createElement(v,null)),r.a.createElement("div",{className:"footer"},r.a.createElement(y,null))))},x=a(120),R=a(63),_={user:{},isLogin:!1};var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(R.a)({},e,{user:t.payload});case"SET_LOGIN":return Object(R.a)({},e,{isLogin:t.payload});default:return Object(R.a)({},e)}},B=Object(L.c)(A,Object(L.a)(x.a));c.a.render(r.a.createElement(j.a,{store:B},r.a.createElement(C,null)),document.getElementById("root"))},40:function(e,t,a){"use strict";var n,r=a(46),l=a(45);!function(e){e.register="/auth/register",e.login="/auth/login",e.logout="/auth/logout",e.isLogined="/auth"}(n||(n={})),t.a={register:function(e){return new Promise((function(t,a){r.a.post(n.register,e).then((function(e){"ok"===e.data.status&&(l.a.success(e.data.msg),t(e.data))})).catch((function(e){l.a.error("\u6ce8\u518c\u5931\u8d25"),a(e.data)}))}))},login:function(e){return new Promise((function(t,a){r.a.post(n.login,e).then((function(e){"ok"===e.data.status&&(l.a.success(e.data.msg),t(e.data))})).catch((function(e){l.a.error(e.data.msg),a(e.data)}))}))},logout:function(){return r.a.get(n.logout).then((function(e){if("ok"===e.data.status)return l.a.warn(e.data.msg),e.data})).catch((function(e){return l.a.error(e.data.msg),e.data}))},isLogined:function(){return new Promise((function(e,t){r.a.get(n.isLogined).then((function(t){"ok"===t.data.status&&e(t.data)})).catch((function(e){t(e.data)}))}))}}},46:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(52),r=a.n(n);r.a.defaults.baseURL="https://blog-server.hunger-valley.com",r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",r.a.defaults.withCredentials=!0;var l=r.a.create({timeout:5e3})},71:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return i}));var n=a(40),r=function(e){return{type:"SET_USER",payload:e}},l=function(e){return{type:"SET_LOGIN",payload:e}},c=function(e){return function(t){return n.a.login(e).then((function(e){"ok"===e.status&&(t(l(!0)),t(r(e.data)))}))}},o=function(e){return function(t){return n.a.register(e).then((function(e){"ok"===e.status&&(t(l(!0)),t(r(e)))}))}},u=function(){return function(e){n.a.logout().then((function(t){"ok"===t.status&&(e(l(!1)),e(r({})))}))}},i=function(){return function(e){n.a.isLogined().then((function(t){!0===t.isLogin&&(e(l(t.isLogin)),e(r(t.data)))}))}}}},[[143,6,7]]]);
//# sourceMappingURL=main.05a20c6e.chunk.js.map